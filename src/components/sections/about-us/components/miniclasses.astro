---
import { Icon } from "astro-icon/components";
const {
    titleIcon,
    color,
    title,
    description,
    image,
    alt = "Card image",
} = Astro.props;
---

<div
    class="miniclass h-120 bg-white rounded-xl ring-2 ring-wri-gray-400 overflow-hidden flex flex-col hover:ring-4 hover:ring-wri-blue transition-all duration-300"
>
    <div
        class="flex justify-center items-center h-2/3 bg-wri-gray-200 relative [perspective:1000px]"
    >
        <img
            src="../assets/dummy/dummy.webp"
            alt="Project images"
            class="projects aspect-video w-58 absolute right-18 rotate-4 opacity-0 translate-y-10"
        />
        <img
            src="../assets/dummy/dummy.webp"
            alt="Project images"
            class="projects aspect-video w-58 absolute left-18 -rotate-4 opacity-0 translate-y-10"
        />

        <img src={image} alt={alt} class="h-30 object-cover relative z-10" />
    </div>

    <div class="h-1/3 p-6 flex flex-col justify-center relative z-20 bg-white">
        <div class="flex items-center mb-2">
            <Icon name={titleIcon} class={`w-6 h-6 mr-3 ${color}`} />
            <h1 class="text-2xl font-bold">{title}</h1>
        </div>
        <p class="text-wri-gray-600 line-clamp-3">{description}</p>
    </div>
</div>

<script>
    import gsap from "gsap";

    const cards = document.querySelectorAll(".miniclass");

    cards.forEach((card) => {
        const projects = card.querySelectorAll(".projects");

        card.addEventListener("mouseenter", () => {
            gsap.to(projects, {
                opacity: 1,
                y: 10,
                z: 50,
                scale: 1,
                rotationY: 15,
                rotationX: 15,
                duration: 0.5,
                stagger: 0.1,
                ease: "back.out(1.7)",
                overwrite: true,
            });
        });

        card.addEventListener("mouseleave", () => {
            gsap.to(projects, {
                opacity: 0,
                y: 40,
                z: 0,
                scale: 0.9,
                rotationY: 0,
                rotationX: 0,
                duration: 0.3,
                ease: "power2.in",
                overwrite: true,
            });
        });
    });
</script>
